apiVersion: v1
kind: Secret
metadata:
  name: {{ include "spending-monitor.fullname" . }}-secret
  labels:
    {{- include "spending-monitor.labels" . | nindent 4 }}
type: Opaque
data:
  # Database environment variables
  POSTGRES_DB: {{ .Values.secrets.POSTGRES_DB | toString | b64enc | quote }}
  POSTGRES_USER: {{ .Values.secrets.POSTGRES_USER | toString | b64enc | quote }}
  POSTGRES_PASSWORD: {{ .Values.secrets.POSTGRES_PASSWORD | toString | b64enc | quote }}
  POSTGRES_DB_HOST: {{ .Values.secrets.POSTGRES_DB_HOST | toString | b64enc | quote }}
  POSTGRES_DB_PORT: {{ .Values.secrets.POSTGRES_DB_PORT | toString | b64enc | quote }}

  # API environment variables
  DATABASE_URL: {{ .Values.secrets.DATABASE_URL | toString | b64enc | quote }}
  API_KEY: {{ .Values.secrets.API_KEY | toString | b64enc | quote }}
  BASE_URL: {{ .Values.secrets.BASE_URL | toString | b64enc | quote }}
  LLM_PROVIDER: {{ .Values.secrets.LLM_PROVIDER | toString | b64enc | quote }}
  MODEL: {{ .Values.secrets.MODEL | toString | b64enc | quote }}
  ENVIRONMENT: {{ .Values.secrets.ENVIRONMENT | toString | b64enc | quote }}
  DEBUG: {{ .Values.secrets.DEBUG | toString | b64enc | quote }}
  BYPASS_AUTH: {{ .Values.secrets.BYPASS_AUTH | toString | b64enc | quote }}
  CORS_ALLOWED_ORIGINS: {{ .Values.secrets.CORS_ALLOWED_ORIGINS | toString | b64enc | quote }}
  ALLOWED_ORIGINS: {{ .Values.secrets.ALLOWED_ORIGINS | toString | b64enc | quote }}
  ALLOWED_HOSTS: {{ .Values.secrets.ALLOWED_HOSTS | toString | b64enc | quote }}
  SMTP_HOST: {{ .Values.secrets.SMTP_HOST | toString | b64enc | quote }}
  SMTP_PORT: {{ .Values.secrets.SMTP_PORT | toString | b64enc | quote }}
  SMTP_FROM_EMAIL: {{ .Values.secrets.SMTP_FROM_EMAIL | toString | b64enc | quote }}
  SMTP_USE_TLS: {{ .Values.secrets.SMTP_USE_TLS | toString | b64enc | quote }}
  SMTP_USE_SSL: {{ .Values.secrets.SMTP_USE_SSL | toString | b64enc | quote }}
  KEYCLOAK_URL: {{ .Values.secrets.KEYCLOAK_URL | toString | b64enc | quote }}
  KEYCLOAK_FRONTEND_URL: {{ .Values.secrets.KEYCLOAK_FRONTEND_URL | toString | b64enc | quote }}
  KEYCLOAK_REALM: {{ .Values.secrets.KEYCLOAK_REALM | toString | b64enc | quote }}
  KEYCLOAK_CLIENT_ID: {{ .Values.secrets.KEYCLOAK_CLIENT_ID | toString | b64enc | quote }}
  KEYCLOAK_REDIRECT_URIS: {{ .Values.secrets.KEYCLOAK_REDIRECT_URIS | toString | b64enc | quote }}
  KEYCLOAK_WEB_ORIGINS: {{ .Values.secrets.KEYCLOAK_WEB_ORIGINS | toString | b64enc | quote }}
  
  # Keycloak database credentials (for reference, actual usage is in keycloak-secret)
  KEYCLOAK_DB_USER: {{ .Values.secrets.KEYCLOAK_DB_USER | toString | b64enc | quote }}
  KEYCLOAK_DB_PASSWORD: {{ .Values.secrets.KEYCLOAK_DB_PASSWORD | toString | b64enc | quote }}
  KEYCLOAK_ADMIN_PASSWORD: {{ .Values.secrets.KEYCLOAK_ADMIN_PASSWORD | toString | b64enc | quote }}

  LLAMASTACK_BASE_URL: {{ .Values.secrets.LLAMASTACK_BASE_URL | toString | b64enc | quote }}
  LLAMASTACK_MODEL: {{ .Values.secrets.LLAMASTACK_MODEL | toString | b64enc | quote }}

  # UI environment variables
  VITE_API_BASE_URL: {{ .Values.secrets.VITE_API_BASE_URL | toString | b64enc | quote }}
  VITE_BYPASS_AUTH: {{ .Values.secrets.VITE_BYPASS_AUTH | toString | b64enc | quote }}
  VITE_ENVIRONMENT: {{ .Values.secrets.VITE_ENVIRONMENT | toString | b64enc | quote }}
